{% extends "base.html" %}

{% block content %}
<h1 class="mb-4 text-center">–°–≤–µ–∂–∏–µ —Ä–µ—Ü–µ–ø—Ç—ã –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h1>
<div class="row g-4 justify-content-center">
    {% for recipe, avg_rating, reviews_count in recipes %}
    <div class="col-12 col-md-6 col-lg-4 d-flex align-items-stretch">
        <div class="card w-100 shadow recipe-card mb-3">
            <div class="card-body d-flex flex-column">
                <h3 class="card-title text-center mb-2">{{ recipe.name }}</h3>
                <ul class="list-unstyled mb-3">
                    <li><span class="fw-bold">‚è± –í—Ä–µ–º—è:</span> {{ recipe.cook_time }} –º–∏–Ω</li>
                    <li><span class="fw-bold">üçΩ –ü–æ—Ä—Ü–∏–π:</span> {{ recipe.portions }}</li>
                    <li><span class="fw-bold">‚≠ê –û—Ü–µ–Ω–∫–∞:</span> {% if reviews_count > 0 %}{{ avg_rating|round(1) }}{% else %}-{% endif %}</li>
                    <li><span class="fw-bold">üí¨ –û—Ç–∑—ã–≤–æ–≤:</span> {{ reviews_count }}</li>
                </ul>
                <div class="mt-auto text-center">
                    <a href="{{ url_for('view_dish', id=recipe.id) }}" class="btn btn-primary btn-sm px-4">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                </div>
            </div>
            <div class="recipe-card-footer text-center py-2">
                <small class="text-muted">–ê–≤—Ç–æ—Ä: {% if recipe.author %}{{ recipe.author.first_name }} {{ recipe.author.last_name }}{% else %}–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ{% endif %}</small>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
<nav aria-label="Page navigation" class="mt-4">
    <ul class="pagination justify-content-center">
        {% if pagination.has_prev %}
        <li class="page-item">
            <a class="page-link" href="{{ url_for('home', page=pagination.prev_num) }}">–ù–∞–∑–∞–¥</a>
        </li>
        {% endif %}
        {% for page in pagination.iter_pages() %}
            {% if page %}
                <li class="page-item {% if page == pagination.page %}active{% endif %}">
                    <a class="page-link" href="{{ url_for('home', page=page) }}">{{ page }}</a>
                </li>
            {% else %}
                <li class="page-item disabled"><span class="page-link">...</span></li>
            {% endif %}
        {% endfor %}
        {% if pagination.has_next %}
        <li class="page-item">
            <a class="page-link" href="{{ url_for('home', page=pagination.next_num) }}">–í–ø–µ—Ä—ë–¥</a>
        </li>
        {% endif %}
    </ul>
</nav>
{% endblock %} 